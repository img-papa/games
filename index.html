<!DOCTYPE html>
<html lang="ja">
<head>
<title>イマジナリーパパス - トップページ</title>
<meta charset="utf-8">

<meta name="description" content="ゲームを作っています。今のところフリーゲーム／ホラーのみ。" />

<meta property="og:title" content="イマジナリーパパス" />
<meta property="og:site_name" content="イマジナリーパパス" />
<meta property="og:url" content="https://img-papa.github.io/games/" />
<link rel="canonical" href="https://img-papa.github.io/games/" />
<meta name="twitter:site" content="@img_papa" />

<meta property="og:image" content="img/myicon.png" />
<link rel="icon" href="img/myicon.png" sizes="62x62" type="image/png" />
<link rel="apple-touch-icon-precomposed" href="img/myicon.png" />

<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width,initial-scale=1">

<link rel="stylesheet" href="default.css">
<link rel="stylesheet" href="common.css">
<link rel="stylesheet" href="style.css">
</head>
<body>
        
    <header>
        <!-- background image -->
        <nav>
            <dl>
                <dt>2025.02.09</dt>
                <dd>『<a href="#new">指示待ちゲーム</a>』公開</dd>
            </dl>
        </nav>
    </header>

    <aside>

        <!--hgroup>
            <h2>イマジナリーパパス</h2>
            <h3>@img_papa</h3>
            <p>ゲーム作ってるよ<br>今のところ全部ホラー</p>
        </hgroup-->

        <nav>

            <a href="https://x.com/img_papa" target="_blank" class="link_i">
                <div class="icon" style="background-image:url('img/logo-twitter_white.png')"></div>
                <p>Twitter</p>
            </a>

            <a href="https://note.com/img_papa" target="_blank" class="link_i">
                <div class="icon" style="background-image:url('img/links_icon_note.png')"></div>
                <p>note</p>
            </a>
            
            <a href="https://img-papa.booth.pm/" target="_blank" class="link_i">
                <div class="icon" style="background-image:url('img/links_icon_booth.png')"></div>
                <p>BOOTH</p>
            </a>
            
            <a href="https://www.youtube.com/@img_papa" target="_blank" class="link_i">
                <div class="icon" style="background-image:url('img/links_icon_youtube.png')"></div>
                <p>YouTube</p>
            </a>
            
            <a href="https://www.nicovideo.jp/user/138086854" target="_blank" class="link_i">
                <div class="icon" style="background-image:url('img/links_icon_nico.png')"></div>
                <article>
                    <p>niconico</p>
                </article>
            </a>

            <a href="https://xfolio.jp/portfolio/img_papa" target="_blank" class="link_i">
                <div class="icon" style="background-image:url('img/links_icon_xfolio.png')"></div><p>Xfolio</p>
            </a>
        </nav>

    </aside>

    <main>

        <div id="top">

            <section class="search">
                <h3>ゲーム検索</h3>
                <p>
                    ページ内検索ができます。Enterキーで次の項目<br>
                    ※<a href="https://www.benricho.org/Tips/ctrl_F/highlight_inpage/" target="_blank">【みんなの知識 ちょっと便利帳】</a>様の<br>配布スクリプトを使用させていただいております。
                </p>
                <input type="text" id="searchTerm" placeholder="プレイしたいゲームのジャンルを入力してください。">
                <button onclick="nextHighlight()">前へ</button>
                <button onclick="previousHighlight()">次へ</button>
                <button onclick="resetSearch()">リセット</button>
            </section>

            <section>
                <a href="https://img-papa.github.io/games/guide.html" target="_blank" class="link_sp" style="margin:1em auto 2em;">実況の前にガイドラインをお読みください</a>
            </section>

        </div>

        <div id="games">

            <article id="new" style="background-image:url(img/games_rap.png);">
                <section>

                    <hgroup>
                        <h3>指示待ちゲーム</h3>
                        <p>絶対に指示を守ってください。</p>
                    </hgroup>
                    
                    <div class="data">
                        <p class="time"><b>1</b>～<b>2</b>分</p>
                        <p class="route"><b>5</b>通り</p>
                    </div>

                    <ul class="tag">
                        <li>Windows11</li><li>短編</li><li>キーボード操作</li><li>マウス操作</li><li>ミニゲーム</li><li>ホラー</li>
                    </ul>

                    <ul class="level">
                        <ul>
                            <li>じっとり</li>
                            <li>怖さ</li>
                            <li>びっくり</li>
                        </ul>
                        <ul class="level_bar">
                            <li></li>
                            <li></li>
                            <li></li>
                            <li></li>
                            <li class="point"></li>
                        </ul>
                    </ul>
                    <ul class="dl">
                        <li><a href="https://img-papa.booth.pm/items/6576498" target="_blank" class="link_r">BOOTH</a></li>
                    </ul>

                </section>
            </article>

            <article style="background-image:url(img/games_fofw.png);">
                <section>
                    <hgroup>
                        <h3>Focus on Fox's windows</h3>
                        <p>“狐の窓”で怪異を探そう！</p>
                    </hgroup>

                    <div class="data">
                        <p class="time"><b>2</b>～<b>3</b>分</p>
                        <p class="route">なし</p>
                    </div>

                    <ul class="tag">
                        <li>Windows11</li><li>短編</li><li>マウス操作</li><li>ホラー</li>
                    </ul>

                    <ul class="level">
                        <ul>
                            <li>じっとり</li>
                            <li>怖さ</li>
                            <li>びっくり</li>
                        </ul>
                        <ul class="level_bar">
                            <li></li>
                            <li></li>
                            <li></li>
                            <li class="point"></li>
                            <li></li>
                        </ul>
                    </ul>
                    <ul class="dl">
                        <li><a href="https://freegame-mugen.jp/adventure/game_13163.html" target="_blank" class="link_r">フリーゲーム夢現</a></li>
                        <li><a href="https://img-papa.booth.pm/items/6409614" target="_blank" class="link_r">BOOTH</a></li>
                    </ul>
                </section>
            </article>

            <article style="background-image:url(img/games_k-alert.png);">
                <section>

                    <hgroup>
                        <h3>K報</h3>
                        <p>外から断続的な機械音がする。どうやら、マンションの警報機が壊れてしまったらしい。</p>
                    </hgroup>

                    <div class="data">
                        <p class="time"><b>7</b>～<b>10</b>分</p>
                        <p class="route">なし</p>
                    </div>

                    <ul class="tag">
                        <li>Windows11</li><li>短編</li><li>マウス操作</li><li>一人称視点</li><li>ストーリー</li><li>ホラー</li>
                    </ul>

                    <ul class="level">
                        <ul>
                            <li>じっとり</li>
                            <li>怖さ</li>
                            <li>びっくり</li>
                        </ul>
                        <ul class="level_bar">
                            <li></li>
                            <li class="point"></li>
                            <li></li>
                            <li></li>
                            <li></li>
                        </ul>
                    </ul>

                    <ul class="dl">
                        <li><a href="https://freegame-mugen.jp/adventure/game_13045.html" target="_blank" class="link_r">フリーゲーム夢現</a></li>
                        <li><a href="https://img-papa.booth.pm/items/6272406" target="_blank" class="link_r">BOOTH</a></li>
                    </ul>

                    <p class="center">
                        <a href="https://img-papa.github.io/games/alert/" target="_blank" class="link_sp">おまけページはこちら</a>
                    </p>

                </section>
            </article>
        </div>

        <a href="#" class="link_t" style="margin:3em auto 5em;">ページトップへ戻る</a>
    
        <!--article>
            <hgroup>
                <h3>Information</h3>
                <p>このサイトについて</p>
            </hgroup>
            <p>ゲーム作ってるよ 今のところ全部ホラー</p>
        </article-->

    </main>

    <footer>
    </footer>





<!--

ここから下は以下のサイト様で配布されているスクリプトを利用させていただいております。

【みんなの知識 ちょっと便利帳】
https://www.benricho.org/Tips/ctrl_F/highlight_inpage/

ページ内検索を自サイトに設置する方法 - How to Implement In-Page Search on Your Web Page. ヒットしたテキストをハイライト表示・対象の文字へスクロール

-->

<script>
    let highlights = [];            // ハイライトされた要素を格納する配列
    let currentIndex = -1;          // 現在のハイライト位置を示すインデックス
    let lastSearchTerm = '';        // 最後に検索された語句を保持する変数
    let searchTimer = null;         // 入力変更後に検索を遅延させるためのタイマー
    let isComposing = false;        // 入力中の状態を保持
    let caseSensitive = false;      // 大文字小文字の区別フラグ（デフォルトは区別しない）

    /**
     * 特殊文字をエスケープする関数
     * @param {string} string - エスケープする文字列
     * @returns {string} - エスケープされた文字列
     */
    function escapeRegExp(string) {
        return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
    }

    /**
     * 検索を実行し、マッチしたテキストをハイライトする関数
     * @param {string} searchTerm - 検索語
     */
    function search(searchTerm) {
        if (!searchTerm || searchTerm === lastSearchTerm) return;

        lastSearchTerm = searchTerm;
        resetHighlights();

        searchTerm = escapeRegExp(searchTerm);

        const content = document.getElementById('games');
        searchAndHighlight(content, searchTerm);

        if (highlights.length > 0) {
            currentIndex = 0;
            scrollToHighlight(currentIndex);
        }

        document.getElementById('searchTerm').focus();
    }

    /**
     * テキストノード内で検索語を見つけてハイライトする関数
     * @param {Node} element - 検索対象のノード
     * @param {string} searchTerm - 検索語
     */
    function searchAndHighlight(element, searchTerm) {
        if (element.nodeType === 3) { // テキストノード
            const regex = new RegExp(searchTerm, caseSensitive ? 'g' : 'gi');
            const matches = element.textContent.match(regex);
            if (matches) {
                const parent = element.parentNode;
                const fragment = document.createDocumentFragment();
                let lastIndex = 0;
                matches.forEach(match => {
                    const matchStart = element.textContent.indexOf(match, lastIndex);
                    const matchEnd = matchStart + match.length;

                    fragment.appendChild(document.createTextNode(element.textContent.slice(lastIndex, matchStart)));

                    const span = document.createElement('span');
                    span.className = 'highlight';
                    span.textContent = match;
                    fragment.appendChild(span);

                    lastIndex = matchEnd;
                    highlights.push(span);
                });

                fragment.appendChild(document.createTextNode(element.textContent.slice(lastIndex)));
                parent.replaceChild(fragment, element);
            }
        } else {
            Array.from(element.childNodes).forEach(child => searchAndHighlight(child, searchTerm));
        }
    }

    /**
     * 現在のハイライト要素にスクロールする関数
     * @param {number} index - ハイライト要素のインデックス
     */
    function scrollToHighlight(index) {
        if (highlights.length > 0) {
            highlights.forEach(el => el.classList.remove('current'));
            highlights[index].classList.add('current');
            highlights[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    /**
     * 次のハイライトに移動する関数
     */
    function nextHighlight() {
        if (highlights.length > 0) {
            currentIndex = (currentIndex + 1) % highlights.length;
            scrollToHighlight(currentIndex);
        }
    }

    /**
     * 前のハイライトに移動する関数
     */
    function previousHighlight() {
        if (highlights.length > 0) {
            currentIndex = (currentIndex - 1 + highlights.length) % highlights.length;
            scrollToHighlight(currentIndex);
        }
    }

    /**
     * ハイライトをリセットする関数
     */
    function resetHighlights() {
        highlights.forEach(el => {
            el.outerHTML = el.innerHTML;
        });
        highlights = [];
        currentIndex = -1;
        lastSearchTerm = '';
    }

    /**
     * 検索をリセットし、入力枠にスクロールする関数
     */
    function resetSearch() {
        resetHighlights();
        document.getElementById('searchTerm').value = '';
        scrollToSearchInput();
    }

    /**
     * 入力枠にスクロールする関数
     */
    function scrollToSearchInput() {
        const searchInput = document.getElementById('searchTerm');
        searchInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
        searchInput.focus(); // 入力枠にフォーカスも合わせる
    }

    /**
     * 検索の処理を実行する関数
     */
    function handleSearch() {
        const searchTerm = document.getElementById('searchTerm').value;

        // 検索語句が空の場合にリセットし、入力枠にスクロールする
        if (searchTerm === '') {
            resetSearch();
            return;
        }

        if (searchTerm && searchTerm !== lastSearchTerm) {
            search(searchTerm);

            if (highlights.length === 0) {
                scrollToSearchInput();
            }
        }
    }

    document.getElementById('searchTerm').addEventListener('keydown', function(e) {
        if (e.key === 'Enter') {
            e.preventDefault();
            const searchTerm = this.value;
            if (searchTerm) {
                if (currentIndex === -1) {
                    handleSearch();
                } else {
                    nextHighlight();
                }
            }
        }
    });

    document.getElementById('searchTerm').addEventListener('input', function() {
        if (searchTimer) clearTimeout(searchTimer);
        if (!isComposing) {
            searchTimer = setTimeout(handleSearch, 500);
        }
    });

    document.getElementById('searchTerm').addEventListener('compositionstart', function() {
        isComposing = true;
    });

    document.getElementById('searchTerm').addEventListener('compositionend', function() {
        isComposing = false;
        handleSearch();
    });

    document.querySelectorAll('input[name="caseOption"]').forEach(radio => {
        radio.addEventListener('change', handleCaseOptionChange);
    });

    /**
     * 大文字小文字の区別設定を変更する関数
     */
    function handleCaseOptionChange() {
        caseSensitive = document.querySelector('input[name="caseOption"]:checked').value === 'sensitive';
        search(document.getElementById('searchTerm').value);
    }
</script>
</body>
